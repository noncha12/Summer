<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ã‡∏±‡∏°‡πÄ‡∏°‡∏≠‡∏£‡πå</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#ff85b3">
  <link rel="manifest" href="manifest.json">
  <link href="https://fonts.googleapis.com/css2?family=Prompt&family=Itim&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.0/Sortable.min.js"></script>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: 'Prompt', 'Itim', sans-serif;
      background: linear-gradient(135deg, #1f2235, #2c2f4a);
      color: #fff;
    }
    .timetable {
      max-width: 1100px;
      margin: 50px auto;
      padding: 30px;
      border-radius: 25px;
      background-color: rgba(255, 255, 255, 0.05);
      box-shadow: 0 10px 30px rgba(0,0,0,0.4);
    }
    .timetable h1 {
      text-align: center;
      font-size: 36px;
      color: #ffb6e0;
      margin-bottom: 5px;
    }
    .name {
      text-align: center;
      font-size: 18px;
      margin-bottom: 20px;
      color: #ffc0f0;
    }
    #toggle-theme {
      display: block;
      margin: 0 auto 30px;
      background: #444c5c;
      color: #fff;
      border: none;
      padding: 10px 25px;
      border-radius: 20px;
      cursor: pointer;
      font-family: 'Itim';
    }
    .day-columns {
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
      justify-content: center;
    }
    .day {
      flex: 1;
      min-width: 300px;
      padding: 20px;
      border-radius: 20px;
      background: linear-gradient(135deg, #4e4376, #2b5876);
      box-shadow: 0 8px 20px rgba(0,0,0,0.3);
    }
    .day h2 {
      text-align: center;
      font-size: 24px;
      margin: 0 0 20px;
      color: #ffccf2;
    }
    .subject-list {
      min-height: 100px;
    }
    .subject {
      background: linear-gradient(135deg, #1d1f2b, #292d3e);
      border-radius: 15px;
      margin-bottom: 20px;
      padding: 15px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 15px;
      cursor: grab;
    }
    .subject-info {
      flex-grow: 1;
    }
    .subject p {
      margin: 5px 0;
      font-size: 14px;
      color: #ddd;
    }
    .subject strong {
      color: #ff9acb;
    }
    .subject i {
      margin-right: 6px;
      color: #ff85b3;
    }
    .teacher-img {
      width: 60px;
      height: 60px;
      border-radius: 12px;
      object-fit: cover;
      border: 2px solid #fff;
    }
    body.light {
      background: linear-gradient(135deg, #fce4ec, #e0f7fa);
      color: #333;
    }
    body.light .timetable {
      background-color: #ffffffcc;
      box-shadow: 0 8px 20px rgba(0,0,0,0.1);
    }
    body.light h1 {
      color: #d81b60;
    }
    body.light .name {
      color: #e91e63;
    }
    body.light #toggle-theme {
      background: #f48fb1;
      color: white;
    }
    body.light .day {
      background: linear-gradient(135deg, #f3e5f5, #e1bee7);
    }
    body.light .day h2 {
      color: #880e4f;
    }
    body.light .subject {
      background: #ffffff;
      color: #333;
    }
    body.light .subject p {
      color: #444;
    }
    body.light .subject strong {
      color: #c2185b;
    }
    body.light .subject i {
      color: #e91e63;
    }
    @media (max-width: 768px) {
      .day-columns {
        flex-direction: column;
      }

      /* ‡∏õ‡∏£‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡∏Ç‡∏≠‡∏ö‡πÉ‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ */
body {
  box-sizing: border-box;
}

.timetable {
  margin: 20px 10px;
  padding: 20px;
}

#toggle-theme {
  width: 100%;
  max-width: 280px;
  font-size: 16px;
}

.subject {
  flex-direction: column;
  align-items: flex-start;
}

.subject-info {
  width: 100%;
}

.teacher-img {
  align-self: flex-end;
}

@media (max-width: 480px) {
  .timetable h1 {
    font-size: 28px;
  }
  .name {
    font-size: 16px;
  }
  .day h2 {
    font-size: 20px;
  }
  .subject p {
    font-size: 13px;
  }
  .teacher-img {
    width: 50px;
    height: 50px;
  }
}

    }
  </style>
</head>
<body>

<div class="timetable">
  <h1><i class="fa-solid fa-calendar-days"></i> ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ã‡∏±‡∏°‡πÄ‡∏°‡∏≠‡∏£‡πå</h1>
  <p class="name">üå∏ NATCHANON üå∏</p>
  <button id="toggle-theme"><i class="fa-solid fa-sun"></i> ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô Light Mode</button>

  <div class="day-columns">
    <div class="day">
      <h2><i class="fa-solid fa-sun"></i> ‡πÄ‡∏™‡∏≤‡∏£‡πå</h2>
      <div class="subject-list" id="saturday"></div>
    </div>

    <div class="day">
      <h2><i class="fa-solid fa-heart"></i> ‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå</h2>
      <div class="subject-list" id="sunday"></div>
    </div>
  </div>
</div>

<script>
const subjectsData = {
  saturday: [
    {
      title: "‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå‡πÅ‡∏•‡∏∞‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£",
      time: "08:00 - 17:00",
      room: "‡∏´‡πâ‡∏≠‡∏á 01302 / ‡∏≠. ‡∏Å‡∏§‡∏©‡∏ì‡∏û‡∏• ‡πÄ‡∏Å‡∏¥‡∏î‡∏ó‡∏≠‡∏á‡∏Ñ‡∏≥",
      img: "Kritsanapon.jpg"
    },
    {
      title: "‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≤‡∏£‡∏™‡∏ô‡πÄ‡∏ó‡∏®‡πÄ‡∏ä‡∏¥‡∏á‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå",
      time: "17:00 - 21:00",
      room: "‡∏´‡πâ‡∏≠‡∏á 01708 / ‡∏≠. ‡∏†‡∏≤‡∏Ñ‡∏†‡∏π‡∏°‡∏¥ ‡∏´‡∏°‡∏µ‡πÄ‡∏á‡∏¥‡∏ô",
      img: "Pakpoom.jpg"
    }
  ],
  sunday: [
    {
      title: "‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏Å‡∏£‡∏≤‡∏ü‡∏¥‡∏Å‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏∑‡πà‡∏≠‡∏ú‡∏™‡∏°",
      time: "08:00 - 17:00",
      room: "‡∏´‡πâ‡∏≠‡∏á 01312 / ‡∏≠. ‡∏ß‡∏¥‡∏£‡∏±‡∏ï‡∏£ ‡∏ö‡∏∏‡∏ï‡∏£‡∏ß‡∏≤‡∏õ‡∏µ",
      img: "Wirat.jpg"
    },
    {
      title: "‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≤‡∏£‡∏™‡∏ô‡πÄ‡∏ó‡∏®‡πÄ‡∏ä‡∏¥‡∏á‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå",
      time: "17:00 - 20:00",
      room: "‡∏´‡πâ‡∏≠‡∏á 01708 / ‡∏≠. ‡∏†‡∏≤‡∏Ñ‡∏†‡∏π‡∏°‡∏¥ ‡∏´‡∏°‡∏µ‡πÄ‡∏á‡∏¥‡∏ô",
      img: "Pakpoom.jpg"
    }
  ]
};

function renderSubjects() {
  for (const day of ["saturday", "sunday"]) {
    const container = document.getElementById(day);
    container.innerHTML = "";

    const saved = localStorage.getItem(`subjects-${day}`);
    const list = saved ? JSON.parse(saved) : subjectsData[day];

    list.forEach(subject => {
      const div = document.createElement("div");
      div.className = "subject";
      div.innerHTML = `
        <div class="subject-info">
          <p><i class="fa-solid fa-book-open"></i> <strong>${subject.title}</strong></p>
          <p><i class="fa-regular fa-clock"></i> ‡πÄ‡∏ß‡∏•‡∏≤ ${subject.time}</p>
          <p><i class="fa-solid fa-location-dot"></i> ${subject.room}</p>
        </div>
        <img src="${subject.img}" class="teacher-img" alt="">
      `;
      container.appendChild(div);
    });

    Sortable.create(container, {
      animation: 150,
      onEnd: () => {
        const items = Array.from(container.children).map(card => ({
          title: card.querySelector("strong").textContent,
          time: card.querySelectorAll("p")[1].textContent.replace("‡πÄ‡∏ß‡∏•‡∏≤ ", ""),
          room: card.querySelectorAll("p")[2].textContent,
          img: card.querySelector("img").getAttribute("src")
        }));
        localStorage.setItem(`subjects-${day}`, JSON.stringify(items));
      }
    });
  }
}

document.getElementById("toggle-theme").addEventListener("click", () => {
  document.body.classList.toggle("light");
  const isLight = document.body.classList.contains("light");
  document.getElementById("toggle-theme").innerHTML = isLight
    ? '<i class="fa-solid fa-moon"></i> ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô Dark Mode'
    : '<i class="fa-solid fa-sun"></i> ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô Light Mode';
});

renderSubjects();

// Register service worker
if ('serviceWorker' in navigator) {
  window.addEventListener("load", () => {
    navigator.serviceWorker.register("service-worker.js").then(reg => {
      console.log("SW Registered ‚úÖ", reg);
    }).catch(err => {
      console.error("SW Failed ‚ùå", err);
    });
  });
}
</script>

</body>
</html>
